Step 1: Creating or updating necessary database tables...
Updating properties table schema...
NOTICE:  column "property_type" of relation "properties" already exists, skipping
NOTICE:  column "is_multifamily" of relation "properties" already exists, skipping
NOTICE:  column "unit_count" of relation "properties" already exists, skipping
ALTER TABLE
Creating image_storage table if it doesn't exist...
NOTICE:  relation "image_storage" already exists, skipping
CREATE TABLE
Schema updates completed successfully!

Step 2: Running data migration from in-memory to PostgreSQL...
Starting migration from in-memory storage to PostgreSQL...
Starting migration from in-memory storage to PostgreSQL database...
Migrating locations...
Migrated 3 locations
Migrating neighborhoods...
Migrated 3 neighborhoods
Migrating properties...
Migrated 22 properties
Migrating features...
Migrated 4 features
Migrating inquiries...
Migrated 5 inquiries
Migrating property units...
Migrated 3 property units
Migrating property images...
Migration failed: PostgresError: null value in column "url" of relation "property_images" violates not-null constraint
    at ErrorResponse (file:///home/runner/workspace/node_modules/postgres/src/connection.js:788:26)
    at handle (file:///home/runner/workspace/node_modules/postgres/src/connection.js:474:6)
    at TLSSocket.data (file:///home/runner/workspace/node_modules/postgres/src/connection.js:315:9)
    at TLSSocket.emit (node:events:518:28)
    at addChunk (node:internal/streams/readable:561:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
    at Readable.push (node:internal/streams/readable:392:5)
    at TLSWrap.onStreamRead (node:internal/stream_base_commons:191:23) {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '23502',
  detail: 'Failing row contains (1, 1, null, Main exterior view of 253 14th St NE, 0, t, 2025-02-27 18:32:26.069, images/36fd334d5baa36fe224ba5c19df07691.jpg, image/jpeg, 0).',
  schema_name: 'public',
  table_name: 'property_images',
  column_name: 'url',
  file: 'execMain.c',
  line: '2006',
  routine: 'ExecConstraints'
}
Migration failed: PostgresError: null value in column "url" of relation "property_images" violates not-null constraint
    at ErrorResponse (file:///home/runner/workspace/node_modules/postgres/src/connection.js:788:26)
    at handle (file:///home/runner/workspace/node_modules/postgres/src/connection.js:474:6)
    at TLSSocket.data (file:///home/runner/workspace/node_modules/postgres/src/connection.js:315:9)
    at TLSSocket.emit (node:events:518:28)
    at addChunk (node:internal/streams/readable:561:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
    at Readable.push (node:internal/streams/readable:392:5)
    at TLSWrap.onStreamRead (node:internal/stream_base_commons:191:23) {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '23502',
  detail: 'Failing row contains (1, 1, null, Main exterior view of 253 14th St NE, 0, t, 2025-02-27 18:32:26.069, images/36fd334d5baa36fe224ba5c19df07691.jpg, image/jpeg, 0).',
  schema_name: 'public',
  table_name: 'property_images',
  column_name: 'url',
  file: 'execMain.c',
  line: '2006',
  routine: 'ExecConstraints'
}
Data migration failed. Exiting.
îº§ Environment updated. Reloading shell...